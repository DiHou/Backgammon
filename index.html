<!DOCTYPE html>
<html lang="en" ng-app="myApp">
<head>
    <meta http-equiv="Content-Type" content="text/html, charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Backgammon</title>
    <link rel="stylesheet" type="text/css" media="screen" href="css/style.css">
    <link rel="icon" type="image/jpg" href="">
    <script src="lib/angular.min.js"></script>
    <script type="text/javascript" src="lib/jquery.min.js"></script>
</head>
<body>
    <div id="page" ng-controller="myController">    
        <div id="container">
            <!--out
            <div id="eaten">
                <div class="upper">
                    <div class="eatenUpper" ng-repeat="col in [0, 1, 2, 3, 4, 5]">
                    </div>
                </div>
                <div class="lower">
                    <div class="eatenLower">
                        <div class="eatenLower" ng-repeat="col in [0, 1, 2, 3, 4, 5]">
                    </div>
                    </div>
                </div>
            </div>
            -->
            <div id="gamearea">
                <div class="upper">
                    <div class="column columnUpper"
                         ng-repeat="col in [14, 15, 16, 17, 18, 19]"
                         id="{{col}}">
                    </div>
                    <div class="columnUpper eatenUpper" id="t26">
                    </div>
                    <div class="column columnUpper"
                         ng-repeat="col in [20, 21, 22, 23, 24, 25]"
                         id="{{col}}">
                    </div>
                </div>
                <div class="lower">
                    <div class="column columnLower"
                         ng-repeat="col in [13, 12, 11, 10, 9, 8]"
                         id="{{col}}">
                    </div>
                    <div class="columnLower" id="t1">
                    </div>
                    <div class="column columnLower"
                         ng-repeat="col in [7, 6, 5, 4, 3, 2]"
                         id="{{col}}">
                    </div>
                </div>
            </div>
            <div id="ctrl">
                <div id="dicewrapper">
                    <div id="cube" class="show1">
                        <div class="top"></div>
                        <div class="front"></div>
                        <div class="left"></div>
                        <div class="back"></div>
                        <div class="right"></div>
                        <div class="bottom"></div>
                      </div>
                </div>
                <div id="diceVal">
                    <div id="diceVal1"></div>
                    <div id="diceVal2"></div>
                    <div id="diceVal3"></div>
                    <div id="diceVal4"></div>
                </div>
            </div>
            
        </div>
        <div id="init">
            <button ng-click="initBoard()">Initiate Board</button>        
        </div>
    </div>
    
    <script>
        $(document).ready(function() {
            startBoard();
            
            $('.column').click(function(){
                $('.column').css('background-color', '');
                $(this).css('background-color', 'rgba(0, 0, 0, 0.2)');
                $('.player1').css({"background-color":"#ffe5ec", "background-image":"url('images/heart.svg')", "border":"none"});
                $('.player2').css({"background-color":"#d7f4f4", "background-image":"url('images/flower.svg')", "border":"none"});
                if($(this).children().last().attr('class')=='piece player1') {
                    $(this).children().last().css({"background-color":"#f9ecef", "background-image":"url('images/heart_dark.svg')", "border":"3px solid  #c6538c"});
                } else if($(this).children().last().attr('class')=='piece player2') {
                    $(this).children().last().css({"background-color":"#ebfafa", "background-image":"url('images/flower_dark.svg')", "border":"3px solid #2e9e2e"});
                }
            });
        });
        
        function startBoard() {
            for(var i=0; i<2; i++) {
                $('#2').append('<div></div>');
                $('#25').append('<div></div>');
            }
            for(var i=0; i<3; i++) {
                $('#9').append('<div></div>');
                $('#18').append('<div></div>');
            }
            for(var i=0; i<5; i++) {
                $('#7').append('<div></div>');
                $('#13').append('<div></div>');
                $('#14').append('<div></div>');
                $('#20').append('<div></div>');
            }
            for(var i=0; i<6; i++) {
                $('#t26').append('<div class="piece eatenPiece"></div>');
                $('#t1').append('<div class="piece eatenPiece"></div>');
            }
            
            $('#7 div, #9 div, #14 div, #25 div').addClass('piece player1');
            $('#2 div, #13 div, #18 div, #20 div').addClass('piece player2');
        }
        
        $('#dicewrapper').click(function(){
            if($(this).css('animation')=='none 0s ease 0s 1 normal none running'){
                $(this).css('animation', 'roll 1.6s infinite linear');
                $('#cube').css('animation-duration', '2s');
            } else{
                $(this).css('animation', '');
                $('#cube').css('animation-duration', '70s');
            }
            
            
        });
        
        var myApp = angular
                .module("myApp", [])
                .controller("myController", function($scope) {
                    $scope.initBoard = function() {
                        $('.columnUpper div').remove();
                        $('.columnLower div').remove();
                        $('.column').css('background-color', '');
                        startBoard();
                    }
                });
    </script>
</body>
</html>